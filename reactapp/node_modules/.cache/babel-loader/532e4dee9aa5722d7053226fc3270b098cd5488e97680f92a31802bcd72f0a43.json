{"ast":null,"code":"var _jsxFileName = \"D:\\\\newnew\\\\online-exam-system\\\\reactapp\\\\src\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport * as api from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login({\n  onLogin\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    // Clear error when user starts typing\n    if (errors[e.target.name]) {\n      setErrors({\n        ...errors,\n        [e.target.name]: ''\n      });\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.username.trim()) {\n      newErrors.username = 'Username is required';\n    }\n    if (!formData.password.trim()) {\n      newErrors.password = 'Password is required';\n    }\n    return newErrors;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const validationErrors = validateForm();\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n    setLoading(true);\n    setErrors({});\n    try {\n      const response = await api.login(formData);\n      const {\n        user\n      } = response.data;\n\n      // Store user in localStorage for simple session management\n      localStorage.setItem('user', JSON.stringify(user));\n\n      // Call parent component's onLogin if provided\n      if (onLogin) {\n        onLogin(user);\n      }\n\n      // Redirect based on role\n      if (user.role === 'TEACHER') {\n        navigate('/teacher/dashboard');\n      } else {\n        navigate('/student/dashboard');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setErrors({\n        general: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed. Please try again.'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const goToSignup = () => {\n    navigate('/signup');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"auth-title\",\n        children: \"Login to Exam System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), errors.general && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: errors.general\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"auth-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            name: \"username\",\n            value: formData.username,\n            onChange: handleChange,\n            className: errors.username ? 'error' : '',\n            placeholder: \"Enter your username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), errors.username && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"field-error\",\n            children: errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            value: formData.password,\n            onChange: handleChange,\n            className: errors.password ? 'error' : '',\n            placeholder: \"Enter your password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), errors.password && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"field-error\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"auth-button\",\n          disabled: loading,\n          children: loading ? 'Logging in...' : 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Don't have an account?\", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"link-button\",\n            onClick: goToSignup,\n            children: \"Sign up here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"kicoXcmXEa9hbc1MXsetzThZ5QU=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","api","jsxDEV","_jsxDEV","Login","onLogin","_s","formData","setFormData","username","password","errors","setErrors","loading","setLoading","navigate","handleChange","e","target","name","value","validateForm","newErrors","trim","handleSubmit","preventDefault","validationErrors","Object","keys","length","response","login","user","data","localStorage","setItem","JSON","stringify","role","error","_error$response","_error$response$data","general","message","goToSignup","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","placeholder","disabled","onClick","_c","$RefreshReg$"],"sources":["D:/newnew/online-exam-system/reactapp/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as api from '../utils/api';\r\n\r\n\r\nexport default function Login({ onLogin }) {\r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        // Clear error when user starts typing\r\n        if (errors[e.target.name]) {\r\n            setErrors({\r\n                ...errors,\r\n                [e.target.name]: ''\r\n            });\r\n        }\r\n    };\r\n\r\n    const validateForm = () => {\r\n        const newErrors = {};\r\n        \r\n        if (!formData.username.trim()) {\r\n            newErrors.username = 'Username is required';\r\n        }\r\n        \r\n        if (!formData.password.trim()) {\r\n            newErrors.password = 'Password is required';\r\n        }\r\n        \r\n        return newErrors;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const validationErrors = validateForm();\r\n        \r\n        if (Object.keys(validationErrors).length > 0) {\r\n            setErrors(validationErrors);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setErrors({});\r\n\r\n        try {\r\n            const response = await api.login(formData);\r\n            const { user } = response.data;\r\n            \r\n            // Store user in localStorage for simple session management\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            \r\n            // Call parent component's onLogin if provided\r\n            if (onLogin) {\r\n                onLogin(user);\r\n            }\r\n\r\n            // Redirect based on role\r\n            if (user.role === 'TEACHER') {\r\n                navigate('/teacher/dashboard');\r\n            } else {\r\n                navigate('/student/dashboard');\r\n            }\r\n        } catch (error) {\r\n            setErrors({\r\n                general: error.response?.data?.message || 'Login failed. Please try again.'\r\n            });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const goToSignup = () => {\r\n        navigate('/signup');\r\n    };\r\n\r\n    return (\r\n        <div className=\"auth-container\">\r\n            <div className=\"auth-card\">\r\n                <h2 className=\"auth-title\">Login to Exam System</h2>\r\n                \r\n                {errors.general && (\r\n                    <div className=\"error-message\">{errors.general}</div>\r\n                )}\r\n                \r\n                <form onSubmit={handleSubmit} className=\"auth-form\">\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"username\"\r\n                            name=\"username\"\r\n                            value={formData.username}\r\n                            onChange={handleChange}\r\n                            className={errors.username ? 'error' : ''}\r\n                            placeholder=\"Enter your username\"\r\n                        />\r\n                        {errors.username && (\r\n                            <span className=\"field-error\">{errors.username}</span>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value={formData.password}\r\n                            onChange={handleChange}\r\n                            className={errors.password ? 'error' : ''}\r\n                            placeholder=\"Enter your password\"\r\n                        />\r\n                        {errors.password && (\r\n                            <span className=\"field-error\">{errors.password}</span>\r\n                        )}\r\n                    </div>\r\n\r\n                    <button \r\n                        type=\"submit\" \r\n                        className=\"auth-button\"\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? 'Logging in...' : 'Login'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div className=\"auth-footer\">\r\n                    <p>\r\n                        Don't have an account? \r\n                        <button \r\n                            type=\"button\" \r\n                            className=\"link-button\" \r\n                            onClick={goToSignup}\r\n                        >\r\n                            Sign up here\r\n                        </button>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}